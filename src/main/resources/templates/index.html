<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/layout :: layout (~{::body},'index')}">
<body>
	<div id='map'></div>
	<br/>
	<button id='fly'>Fly</button>

	<div class='map-overlay-left-container'>
	  <div class='map-overlay'>
	    <h2 id='location-title'></h2>
	    <p id='location-description'></p>
	  </div>
	</div>
	
	<div class='map-overlay-right-container'>
	  <div class='map-overlay'>
       <h2>Countries Participated</h2>
	   <ol>
		   <li>HARD CODING 1</li>
		   <li>HARD CODING 2</li>
		   <li>HARD CODING 3</li>
	   </ol>
	  </div>
	</div>
	
	
	<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoicmFodWx0Z2VvcmdlIiwiYSI6ImNqaG5lODRjMjNwODIzNm5tcG1hNHV2MnUifQ.y_2bEvmsNFPRZoXqoZyxkg';
	var map = new mapboxgl.Map({
	container: 'map',
	style: 'mapbox://styles/mapbox/streets-v10',
	center: [0,0],
	zoom: 1,
	});

	
	var title = document.getElementById('location-title');
	var description = document.getElementById('location-description');
	var pos=-1;
	var flying=false;
	//FETCHED from DB (USER INPUT)
	var featuresGEO=[{
	                    "type": "Feature",
	                    "geometry": {
	                        "type": "Point",
	                        "coordinates": [32.5159, 15.5984]
	                    },
	                    "properties": {
	                        "title": "First African Cup of Nations",
	                        "icon": "marker",
							"description":"The 1957 African Cup of Nations was the first edition of the Africa Cup of Nations, the football championship of Africa (CAF). It was hosted by Sudan, and three teams participated: Egypt, Sudan, and Ethiopia."
	                    }
	                }, {
	                    "type": "Feature",
	                    "geometry": {
	                        "type": "Point",
	                        "coordinates": [31.2235, 30.0450]
	                    },
	                    "properties": {
	                        "title": "Second African Cup of Nations",
	                        "icon": "marker",
							"description":"The 1959 African Cup of Nations was the second edition of the Africa Cup of Nations, the football championship of Africa (CAF). It was hosted and won by the United Arab Republic, a short-lived confederation between Egypt and Syria. Only three teams participated: host team United Arab Republic, Sudan and Ethiopia. All three matches took place in Cairo."
							             }
	                }];
	
	map.on('load', function () {

	    map.addLayer({
	        "id": "points",
	        "type": "symbol",
	        "source": {
	            "type": "geojson",
	            "data": {
	                "type": "FeatureCollection",
	                "features": featuresGEO
				}
			},
	        "layout": {
	            "icon-image": "{icon}-15",
	            "text-field": "{title}",
	            "text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
	            "text-offset": [0, 0.6],
	            "text-anchor": "top"
	        }}
	    );
	});
	

	document.getElementById('fly').addEventListener('click', function() {
	    // Fly to Sudan 
		pos=(pos+1)%featuresGEO.length;
	    var target = featuresGEO[pos].geometry.coordinates;
   	    title.textContent=featuresGEO[pos].properties.title;
   		description.textContent=featuresGEO[pos].properties.description;
	    

	    map.flyTo({
	        // These options control the ending camera position: centered at
	        // the target, at zoom level 9, and north up.
	        center: target,
	        zoom: 18,
	        bearing: 0,

	        // These options control the flight curve, making it move
	        // slowly and zoom out almost completely before starting
	        // to pan.
	        speed: 1.2, // make the flying slow
	        curve: 1, // change the speed at which it zooms out

	        // This can be any easing function: it takes a number between
	        // 0 and 1 and returns another number between 0 and 1.
	        easing: function (t) {
	            return t;
	        }
	    });
		
		
	});
	</script>

</body>
</html>
